create database dialy
use dialy
create table Nguoi_dung (
	ID int NOT NULL PRIMARY KEY,
	LastName varchar(255),
    FirstName varchar(255),
	MatKhau varchar(255),
	SDT varchar(10),
	x float,
	y float,
	tinhtrang varchar(255),
	DiaChi varchar(255),
    City varchar(255),
	Toa_do geography ,
)
create table HoDuongTinh (
	ID int NOT NULL PRIMARY KEY,
	LastName varchar(255),
    FirstName varchar(255),
	SDT varchar(10),
	x float,
	y float,
	DiaChi varchar(255),
	NgayBiDuongTinh smalldatetime,
	tinhtrang varchar(255),
    City varchar(255),
	Toa_do geography ,
)
Create table User_Ho(
	NguoiDungID int NOT NULL,
	HoID int NOT NULL,
	CONSTRAINT PK_KhoaChinh PRIMARY KEY (NguoiDungID, HoID),
	CONSTRAINT FK_ND FOREIGN KEY (NguoiDungID) REFERENCES Nguoi_dung(ID),
	CONSTRAINT FK_Ho FOREIGN KEY (HoID) REFERENCES HoDuongTinh(ID)
)
-- Thêm Nguoi Dung

INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 1,'Thanh','Le',0792791623,0.872208377412266, 106.79009056436904,'KTX B',18/05/2020,'duong tinh','BINH DUONG',geography::Point(0.872208377412266, 106.79009056436904, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 2,'Cong','Nguyen',0862791632, 10.88350303088421, 106.78177951309968,'KTX B',18/05/2020,'duong tinh','BINH DUONG',geography::Point( 10.88350303088421, 106.78177951309968, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 3,'Thinh','Trinh',0892791642,10.869948, 106.796439,'UIT',19/05/2020,'duong tinh','BINH DUONG',geography::Point(10.869948, 106.796439, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 6,'Vuong','Le',0982791652,10.877118232703948, 106.8061529489715,'KTX khu A',19/05/2020,'duong tinh','BINH DUONG',geography::Point(10.877118232703948, 106.8061529489715, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 7,'Phu','Le Vuong',0902791672,10.880884858733538, 106.81056249035129,'KTX khu A',20/05/2020,'duong tinh','BINH DUONG',geography::Point(10.880884858733538, 106.81056249035129, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 8,'Alan','Le Van',0732791682,10.879167493886937, 106.80718230611217,'KTX khu A',21/05/2020,'duong tinh','BINH DUONG',geography::Point(10.879167493886937, 106.80718230611217, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 9,'Quy','Nguyen Van',0332791692,10.878077014753742, 106.80878198410016,'KTX khu A',22/05/2020,'duong tinh','BINH DUONG',geography::Point(10.878077014753742, 106.80878198410016, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 22,'Giau','Le Van',0333391612,10.86491719857306, 106.76366173290039,'Thu Duc',18/05/2020,'duong tinh','Ho Chi Minh',geography::Point(10.86491719857306, 106.76366173290039, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 23,'Sang','Nguyen',0364442672,10.859943922398136, 106.77147355951766,'Thu Duc',19/05/2020,'duong tinh','Ho Chi Minh',geography::Point(10.859943922398136, 106.77147355951766, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 26,'Vinh','Le',0344441212,10.87107045949965, 106.77844040766355,'Thu Duc',21/05/2020,'duong tinh','Ho Chi Minh',geography::Point(10.87107045949965, 106.77844040766355, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 25,'Hoa','Luy',0125551112, 10.864158568578794, 106.77902785338925,'Thu Duc',20/05/2020,'duong tinh','Ho Chi Minh',geography::Point( 10.864158568578794, 106.77902785338925, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 14,'Giau','Le Thuong',0316661612, 10.866392306931726, 106.78525802899426,'Thu Duc',18/05/2020,'duong tinh','Ho Chi Minh',geography::Point( 10.866392306931726, 106.78525802899426, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 15,'Sang','Le Nguyen Duc',0367772672,10.871154749864244, 106.77653938718642,'Thu Duc',19/05/2020,'duong tinh','Ho Chi Minh',geography::Point(10.871154749864244, 106.77653938718642, 4326))

INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 17,'Hoa','Thuy',0122791999, 10.877160377034658, 106.8021906168956,'Thu Duc',20/05/2020,'duong tinh','BINH DUONG',geography::Point( 10.877160377034658, 106.8021906168956, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 18,'Hoa','Duong Thi',0312791666,10.870227554543938, 106.79817236099483,'Thu Duc',18/05/2020,'duong tinh','BINH DUONG',geography::Point(10.870227554543938, 106.79817236099483, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 24,'Sang','Le Nguyen Phuc',0362792555,10.869721810427496, 106.77095951103124,'Thu Duc',19/05/2020,'duong tinh','BINH DUONG',geography::Point(10.869721810427496, 106.77095951103124, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 20,'Vinh','Lam Van',0342791444,10.87039613572559, 106.76932847030895,'Thu Duc',21/05/2020,'duong tinh','BINH DUONG',geography::Point(10.87039613572559, 106.76932847030895, 4326))
INSERT INTO HoDuongTinh ( ID,LastName,FirstName,SDT,x,y,DiaChi,NgayBiDuongTinh,tinhtrang,City,Toa_do) 
VALUES ( 21,'Hoa','Le Thu',0122791333, 10.86879461065435, 106.77482250221561,'Thu Duc',20/05/2020,'duong tinh','BINH DUONG',geography::Point( 10.86879461065435, 106.77482250221561, 4326))


INSERT INTO Nguoi_dung ( ID,LastName,FirstName,MatKhau,SDT,x_diachi,y_diachi,DiaChi,tinhtrang,City,Toa_do) 
VALUES ( 21,'Hoa','Le Thu','123456',0122791333, 10.86879461065435, 106.77482250221561,'Thu Duc','duong tinh','BINH DUONG',geography::Point( 10.86879461065435, 106.77482250221561, 4326))

INSERT INTO Nguoi_dung ( ID,LastName,FirstName,MatKhau,SDT,x_diachi,y_diachi,DiaChi,tinhtrang,City,Toa_do) 
VALUES ( 24,'Sang','Le Nguyen Phuc','234567',0362792555,10.869721810427496, 106.77095951103124,'Thu Duc','duong tinh','BINH DUONG',geography::Point(10.869721810427496, 106.77095951103124, 4326))

INSERT INTO Nguoi_dung ( ID,LastName,FirstName,MatKhau,SDT,x_diachi,y_diachi,DiaChi,tinhtrang,City,Toa_do) 
VALUES (  18,'Hoa','Duong Thi','123456',0312791666,10.870227554543938, 106.79817236099483,'Thu Duc','duong tinh','BINH DUONG',geography::Point(10.870227554543938, 106.79817236099483, 4326))


Create Table VungPhongToa
(
	ID int NOT NULL PRIMARY KEY,

	nameVung nvarchar(255),
    density int,
	Poly geography ,
)


INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 1,N'Làng Đại Học',20,geography::STGeomFromText('POLYGON((106.80376428 10.88587024 , 106.80376428 10.88578732 , 106.80093556 10.88329971 , 106.79650248 10.88139253 , 106.79320935 10.88027309 , 106.78632753 10.87981702 , 106.78219 10.86729558,106.79080282 10.86688095,106.79401152 10.86509805,106.79641805 10.86447611,106.79857125 10.8642688,106.80583305 10.869037,106.81360147 10.87948533,106.80376428 10.88587024))', 4326))
    
INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 2,N'Bình Thắng',5,geography::STGeomFromText('POLYGON((106.80376428 10.88578732 , 106.80570949 10.8890724 , 106.81340179 10.89756193 , 106.82618585 10.89863794 , 106.82919924 10.89809994, 106.83102553 10.89872761 , 106.83403892 10.89101609 , 106.83467813 10.88348371 , 106.8407049 10.87299186 , 106.83966723 10.87131896, 106.83529442 10.87240856,106.8313132 10.86888336,106.82765831 10.86881926,106.82491715 10.87131896,106.82341604 10.87567736,106.81682419 10.8752287,106.81360147 10.87948533,106.80376428 10.88578732))', 4326))
    
INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 3,N'Linh Trung',50,geography::STGeomFromText('POLYGON((106.78219 10.86729558, 106.77793153 10.8590704, 106.77289598 10.85471062, 106.77516618 10.85027558, 106.79857125 10.8642688, 106.79641805 10.86447611, 106.79401152 10.86509805, 106.79080282 10.86688095, 106.78219 10.86729558))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 4,N'Linh Xuân - Linh Trung',110,geography::STGeomFromText('POLYGON((106.77289598 10.85471062, 106.76872857 10.85415907, 106.76406711 10.85733318, 106.76108377 10.86111765, 106.75915703 10.86514623, 106.76226467 10.86691634, 106.76493724 10.87314218, 106.76611815 10.87588883, 106.76680183 10.87875753, 106.77251989 10.88571553, 106.77798934 10.88901137, 106.77929454 10.88650898, 106.7815942 10.88650898, 106.78538552 10.88248069, 106.78271295 10.8818093, 106.78632753 10.87981702, 106.78219 10.86729558, 106.77793153 10.8590704, 106.77289598 10.85471062))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 5,N'Đông Hòa',1000,geography::STGeomFromText('POLYGON((106.78632753 10.87981702, 106.78271295 10.8818093, 106.78538552 10.88248069, 106.7815942 10.88650898, 106.77929454 10.88650898, 106.77798934 10.88901137, 106.78426677 10.89072031, 106.78675289 10.89078134, 106.79035775 10.89255131, 106.79116573 10.89413816, 106.80502581 10.89065928, 106.80570949 10.8890724], 106.80376428 10.88578732, 106.80093556 10.88329971, 106.79650248 10.88139253, 106.79320935 10.88027309, 106.78632753 10.87981702))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 6,N'Tân Phú',53,geography::STGeomFromText('POLYGON((106.77516618 10.85027558, 106.77376295 10.84903159, 106.78289941 10.84390403, 106.78706365 10.84530802, 106.78986053 10.84402612, 106.81391366 10.84982514, 106.81395635 10.87013223, 106.80816033 10.87216717, 106.80583305 10.869037, 106.79857125 10.8642688, 106.77516618 10.85027558))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 7,N'Long Bình',17,geography::STGeomFromText('POLYGON((106.80816033 10.87216717, 106.81395635 10.87013223, 106.81391366 10.84982514, 106.81904323 10.84337244, 106.82198019 10.84176993, 106.82811518 10.84189813, 106.83718713 10.86125595, 106.83966723 10.87131896, 106.83529442 10.87240856, 106.8313132 10.86888336, 106.82765831 10.86881926, 106.82491715 10.87131896, 106.82341604 10.87567736, 106.81682419 10.8752287, 106.81360147 10.87948533, 106.80816033 10.87216717))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 8,N'Dĩ An',487,geography::STGeomFromText('POLYGON((106.79684901 10.9127382, 106.79055845 10.91677876, 106.7764816 10.91823963, 106.76560924 10.92610572, 106.76354921 10.93060054, 106.75965805 10.92767891, 106.75508022 10.92352117, 106.75210463 10.9179025, 106.75313464 10.91599213, 106.74912903 10.91419412, 106.74993015 10.91205898, 106.74088892 10.90857528, 106.73963002 10.89081904, 106.73825667 10.88722271, 106.74901459 10.87901842, 106.75988694 10.89430294, 106.76618147 10.89126858, 106.7680126 10.89497724, 106.77629182 10.88798846, 106.77798934 10.88901137, 106.78426677 10.89072031, 106.78675289 10.89078134, 106.79035775 10.89255131, 106.79116573 10.89413816, 106.79684901 10.9127382))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 9,N'An Bình',7,geography::STGeomFromText('POLYGON((106.74901459 10.87901842, 106.75915703 10.86514623, 106.76226467 10.86691634, 106.76611815 10.87588883, 106.76680183 10.87875753, 106.77251989 10.88571553, 106.77629182 10.88798846, 106.7680126 10.89497724, 106.76618147 10.89126858, 106.75988694 10.89430294, 106.74901459 10.87901842))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 10,N'Bình An',77,geography::STGeomFromText('POLYGON((106.79684901 10.9127382, 106.80284492 10.90642401, 106.81709609 10.9013043, 106.82062216 10.89816966, 106.81340179 10.89756193, 106.80570458 10.88910801, 106.80506011 10.89064497, 106.79116573 10.89413816, 106.79684901 10.9127382))',4326))

INSERT INTO VungPhongToa ( ID,nameVung,density,Poly) 
VALUES ( 11,N'Bửu Hòa',2,geography::STGeomFromText('POLYGON((106.79684901 10.9127382, 106.80605626 10.92545394, 106.81028214 10.92797314, 106.82137508 10.92915864, 106.83035507 10.90589238, 106.83201524 10.90478089, 106.83102553 10.89872761, 106.82919924 10.89809994, 106.82618585 10.89863794, 106.82062216 10.89816966, 106.81709609 10.9013043, 106.80284492 10.90642401, 106.79684901 10.9127382))',4326))
